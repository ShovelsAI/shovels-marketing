<!DOCTYPE html>
<html lang="{% block html_lang %}{{ DEFAULT_LANG }}{% endblock html_lang %}" class="h-full">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Inline critical CSS -->
  <style>
    /* Critical styles only - minimal set needed for initial render */
    :root {
      --font-fallback: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }
    body {
      margin: 0;
      font-family: 'Scandia', var(--font-fallback);
      -webkit-text-size-adjust: 100%;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      font-display: optional;
    }
    /* Hide Alpine.js elements before it loads */
    [x-cloak] { display: none !important; }
  </style>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-KZGJM6CW');</script>
  <!-- End Google Tag Manager -->

  <!-- Preload critical fonts with high fetchpriority -->
  <link rel="preload" href="/theme/webfonts/Scandia-Regular.woff" as="font" type="font/woff" crossorigin fetchpriority="high">
  <link rel="preload" href="/theme/webfonts/Scandia-Medium.woff" as="font" type="font/woff" crossorigin fetchpriority="high">
  <link rel="preload" href="/theme/webfonts/Scandia-Bold.woff" as="font" type="font/woff" crossorigin fetchpriority="high">
  

  <!-- Critical meta tags -->
  <title>{% block title %}{{ SITENAME }} The intelligence layer for the built world{% endblock title %}</title>
  {% if article and article.summary %}
    <meta name="description" content="{{ article.summary|striptags|truncate(160) }}">
  {% elif page and page.description %}
    <meta name="description" content="{{ page.description|striptags|truncate(160) }}">
  {% elif page and page.summary %}
    <meta name="description" content="{{ page.summary|striptags|truncate(160) }}">
  {% else %}
    <meta name="description" content="Shovels captures the first signal of construction—using AI to turn fragmented permit data into Shovel-ready intelligence. Access via API, web app, or data warehouse.">
  {% endif %}

  <!-- Preload critical CSS -->
  <link rel="preload" href="/theme/css/output.css" as="style">
  <link rel="stylesheet" href="/theme/css/output.css">

  <!-- Defer non-critical CSS -->
  <link rel="preload" href="https://rsms.me/inter/inter.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="https://use.typekit.net/zqr4mgp.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link rel="stylesheet" href="https://use.typekit.net/zqr4mgp.css">
  </noscript>

  <!-- Defer non-critical meta -->
  {% block head %}
  {% if FEED_ALL_ATOM %}
  <link rel="alternate" type="application/atom+xml" title="{{ SITENAME }} Full Atom Feed" href="{{ FEED_DOMAIN }}/{% if FEED_ALL_ATOM_URL %}{{ FEED_ALL_ATOM_URL }}{% else %}{{ FEED_ALL_ATOM }}{% endif %}">
  {% endif %}
  <!-- ... other feed links moved to bottom ... -->
  
  <!-- Canonical URL -->
  <link rel="canonical" href="{{ SITEURL }}/{% if article %}{{ article.url }}{% elif page %}{{ page.url }}{% endif %}" />

  <!-- Social meta tags -->
  <meta property="og:type" content="{% if article %}article{% else %}website{% endif %}" />
  <meta property="og:url" content="{{ SITEURL }}{% if article %}{{ article.url }}{% elif page %}{{ page.url }}{% endif %}" />
  <meta property="og:site_name" content="Shovels" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:title" content="{% if article %}{{ article.title|striptags }} - Shovels{% elif page %}{{ page.title|striptags }} - Shovels{% else %}Shovels - The intelligence layer for the built world{% endif %}" />
  {% if article and article.summary %}
    <meta property="og:description" content="{{ article.summary|striptags|truncate(160) }}" />
  {% elif article and article.description %}
    <meta property="og:description" content="{{ article.description|striptags|truncate(160) }}" />
  {% elif page and page.description %}
    <meta property="og:description" content="{{ page.description|striptags|truncate(160) }}" />
  {% elif page and page.summary %}
    <meta property="og:description" content="{{ page.summary|striptags|truncate(160) }}" />
  {% else %}
    <meta property="og:description" content="Shovels captures the first signal of construction—using AI to turn fragmented permit data into Shovel-ready intelligence. Access via API, web app, or data warehouse." />
  {% endif %}
  {% block og_image %}
  <meta property="og:image" content="{% if article and article.open_graph_image %}{{ SITEURL }}{{ article.open_graph_image }}{% elif article and article.image %}{{ SITEURL }}{{ article.image }}{% else %}{{ SITEURL }}/theme/images/shovels-social.png{% endif %}" />
  <meta property="og:image:alt" content="{% if article %}{{ article.title|striptags }} - Shovels{% elif page %}{{ page.title|striptags }} - Shovels{% else %}Shovels - The intelligence layer for the built world{% endif %}" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  {% endblock %}
  
  <!-- Twitter Card meta tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@shovelsai" />
  <meta name="twitter:title" content="{% if article %}{{ article.title|striptags }} - Shovels{% elif page %}{{ page.title|striptags }} - Shovels{% else %}Shovels - The intelligence layer for the built world{% endif %}" />
  {% if article and article.summary %}
    <meta name="twitter:description" content="{{ article.summary|striptags|truncate(160) }}" />
  {% elif article and article.description %}
    <meta name="twitter:description" content="{{ article.description|striptags|truncate(160) }}" />
  {% elif page and page.description %}
    <meta name="twitter:description" content="{{ page.description|striptags|truncate(160) }}" />
  {% elif page and page.summary %}
    <meta name="twitter:description" content="{{ page.summary|striptags|truncate(160) }}" />
  {% else %}
    <meta name="twitter:description" content="Shovels captures the first signal of construction—using AI to turn fragmented permit data into Shovel-ready intelligence. Access via API, web app, or data warehouse." />
  {% endif %}
  <meta name="twitter:image" content="{% if article and article.twitter_image %}{{ SITEURL }}{{ article.twitter_image }}{% elif article and article.open_graph_image %}{{ SITEURL }}{{ article.open_graph_image }}{% elif article and article.image %}{{ SITEURL }}{{ article.image }}{% else %}{{ SITEURL }}/theme/images/shovels-social.png{% endif %}" />
  {% endblock head %}

  <!-- Favicons (low priority) -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

  <!-- Structured Data: Organization -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Shovels",
    "url": "https://www.shovels.ai",
    "logo": "https://www.shovels.ai/theme/images/shovels-social.png",
    "description": "Shovels captures the first signal of construction—using AI to turn fragmented permit data into Shovel-ready intelligence.",
    "sameAs": [
      "https://twitter.com/shovelsai",
      "https://www.linkedin.com/company/shovels-ai"
    ]
  }
  </script>

  <!-- Structured Data: WebSite -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Shovels",
    "url": "https://www.shovels.ai"
  }
  </script>

  <!-- Structured Data: SiteNavigationElement -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "SiteNavigationElement",
        "name": "API",
        "url": "https://www.shovels.ai/api"
      },
      {
        "@type": "SiteNavigationElement",
        "name": "Permit Database",
        "url": "https://www.shovels.ai/permit-database"
      },
      {
        "@type": "SiteNavigationElement",
        "name": "Enterprise Data Feed",
        "url": "https://www.shovels.ai/enterprise"
      },
      {
        "@type": "SiteNavigationElement",
        "name": "GIS",
        "url": "https://www.shovels.ai/gis"
      },
      {
        "@type": "SiteNavigationElement",
        "name": "Blog",
        "url": "https://www.shovels.ai/blog/"
      },
      {
        "@type": "SiteNavigationElement",
        "name": "About",
        "url": "https://www.shovels.ai/about"
      },
      {
        "@type": "SiteNavigationElement",
        "name": "Careers",
        "url": "https://www.shovels.ai/careers"
      },
      {
        "@type": "SiteNavigationElement",
        "name": "Contact Sales",
        "url": "https://www.shovels.ai/contact-sales"
      }
    ]
  }
  </script>

  <!-- Structured Data: BreadcrumbList -->
  {% if article %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://www.shovels.ai"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Blog",
        "item": "https://www.shovels.ai/blog/"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "{{ article.title|striptags|e }}"
      }
    ]
  }
  </script>
  {% elif page %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://www.shovels.ai"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "{{ page.title|striptags|e }}"
      }
    ]
  }
  </script>
  {% endif %}

  {% block structured_data %}{% endblock structured_data %}
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KZGJM6CW"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  {% if generator %}
    {% set climate_articles = get_climate_articles(generator) %}
  {% else %}
    {% set climate_articles = [] %}
  {% endif %}

  {% block background_pattern %}{% endblock background_pattern %}

  {% include 'header.html' %}

  {% block content %}
  {% endblock %}

  {% include 'footer.html' %}

  <!-- Load non-critical resources -->
  <script defer src="/theme/js/alpine.js"></script>

  <!-- Deferred third-party resources -->
  <script>
    // Load non-critical CSS
    function loadStyle(url) {
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = url;
      document.head.appendChild(link);
    }
    // Load highlight.js only on pages that need it
    if (document.querySelector('pre code')) {
      loadStyle('//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css');
      import('//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js')
        .then(module => module.default.highlightAll());
    }
  </script>

  <!-- Remaining meta tags and resources -->
  <link rel="apple-touch-icon" sizes="180x180" href="/theme/images/apple-touch-icon.png">
  <link rel="manifest" href="/theme/images/site.webmanifest">
    
</body>

</html>